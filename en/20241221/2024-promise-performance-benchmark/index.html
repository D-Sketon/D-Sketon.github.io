<!DOCTYPE html><html lang="en" data-theme-mode="auto"><head><link rel="preconnect" href="https://npm.webcache.cn" crossorigin><link rel="dns-prefetch" href="https://npm.webcache.cn" crossorigin><meta charset="utf-8"><script async src="https://hm.baidu.com/hm.js?55ca897d064d6eb98df32d62c6984cc0"></script><script data-pjax>var _hmt=_hmt||[];_hmt.push(['_trackPageview',location.pathname]);</script><script>window.REIMU_CONFIG={},window.REIMU_CONFIG.icon_font='4552607_4k4bc36ef96',window.REIMU_CONFIG.clipboard_tips={success:{'zh-CN':'复制成功 (*^▽^*)',en:'Copy successfully (*^▽^*)'},fail:{'zh-CN':'复制失败 (ﾟ⊿ﾟ)ﾂ',en:'Copy failed (ﾟ⊿ﾟ)ﾂ'},copyright:{enable:!1,count:50,license_type:'by-nc-sa'}},window.REIMU_CONFIG.clipboard_tips.copyright.content='本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！',window.REIMU_CONFIG.code_block={expand:!0},window.REIMU_CONFIG.base='https://d-sketon.github.io',window.REIMU_CONFIG.i18n_languages=['en'];</script><title> 2024 JavaScript Promise Performance Comparison | 拔剑Sketon </title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="preload" as="style" href="https://fontsapi.zeoseven.com/292/main/result.css" onload="this.rel&#x3D;&#39;stylesheet&#39;" crossorigin><link rel="preload" href="//at.alicdn.com/t/c/font_4552607_4k4bc36ef96.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="/css/loader.css"><meta name="description" content="This article compares the performance of JavaScript Promise in 2024, examining whether Node&#39;s native Promise performance has improved over the years and how the emerging Bun&#39;s Promise implementation p"><meta property="og:type" content="article"><meta property="og:title" content="2024 JavaScript Promise Performance Comparison"><meta property="og:url" content="https://d-sketon.github.io/en/20241221/2024-promise-performance-benchmark/index.html"><meta property="og:site_name" content="拔剑Sketon"><meta property="og:description" content="This article compares the performance of JavaScript Promise in 2024, examining whether Node&#39;s native Promise performance has improved over the years and how the emerging Bun&#39;s Promise implementation p"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://img10.360buyimg.com/ddimg/jfs/t1/214940/28/13992/13695/622039e0E8283ea56/6176b9c35f4d60ab.png"><meta property="og:image" content="https://github.githubassets.com/assets/apple-touch-icon-144x144-b882e354c005.png"><meta property="article:published_time" content="2024-12-21T06:57:17.000Z"><meta property="article:modified_time" content="2025-11-01T09:25:03.908Z"><meta property="article:author" content="D-Sketon"><meta property="article:tag" content="JavaScript"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img10.360buyimg.com/ddimg/jfs/t1/214940/28/13992/13695/622039e0E8283ea56/6176b9c35f4d60ab.png"><meta name="keywords" content="Promise, JavaScript, Benchmark"><link rel="alternate" href="/atom.xml" title="拔剑Sketon" type="application/atom+xml"><link rel="icon shortcut" href="/images/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="preload" as="style" onload="this.onload&#x3D;null;this.rel&#x3D;&#39;stylesheet&#39;" href="https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe.css" integrity="sha384-IfxC36XL&#x2F;toUyJ939C73PcgMuRzAZuIzZxE38drsmO5p6jD7ei+Zx&#x2F;1oA&#x2F;0l8ysE" crossorigin><link rel="stylesheet" href="https://npm.webcache.cn/katex@0.16.24/dist/katex.min.css" integrity="sha384-tTgKLjMYmJr94v8qu2PE5MUGSMbyN2xiH266JUB3gpm8vnnJywd1dWSOEfrFz+YI" crossorigin><link rel="stylesheet" href="https://npm.webcache.cn/@waline/client@2.15.8/dist/waline.css" integrity="sha384-vltfZtesCdl6NYVcFVcjEaIi5RpNvZe9t7fXvq8twVtcoy+Ub9QgnxUYJmwOhYCK" crossorigin><link rel="stylesheet" href="https://npm.webcache.cn/@reimujs/aos@0.1.2/dist/aos.css" integrity="sha384-GMRP93c6Hkz9JVKGAuRR3nTS7M07RwPgTFenXiosjq2VbVgvdDNcz1g6Mkj8AONa" crossorigin><link rel="preload" as="style" onload="this.onload&#x3D;null;this.rel&#x3D;&#39;stylesheet&#39;" href="https://npm.webcache.cn/aplayer@1.10.1/dist/APlayer.min.css" integrity="sha384-tLMkTWh2pfXNWGFlUS0w1TFtRG5xZ9lPWFOooj+vDDLIL+xBGQU&#x2F;voDBY5XE2lVh" crossorigin><meta name="generator" content="Hexo 8.1.1"></head><body> <div id="loader"> <div class="loading-bg loading-left-bg"></div> <div class="loading-bg loading-right-bg"></div> <div class="spinner-box"> <div class="loading-taichi rotate"> <svg width="150" height="150" viewbox="0 0 1024 1024" class="icon" version="1.1" xmlns="https://www.w3.org/2000/svg" shape-rendering="geometricPrecision"> <path d="M303.5 432A80 80 0 0 1 291.5 592A80 80 0 0 1 303.5 432z" fill="var(--red-1, #ff5252)"></path> <path d="M512 65A447 447 0 0 1 512 959L512 929A417 417 0 0 0 512 95A417 417 0 0 0 512 929L512 959A447 447 0 0 1 512 65z 
           M512 95A417 417 0 0 1 929 512A208.5 208.5 0 0 1 720.5 720.5L720.5 592A80 80 0 0 0 720.5 432A80 80 0 0 0 720.5 592L720.5 720.5A208.5 208.5 0 0 1 512 512A208.5 208.5 0 0 0 303.5 303.5A208.5 208.5 0 0 0 95 512A417 417 0 0 1 512 95z" fill="var(--red-1, #ff5252)"></path> </svg> </div> <div class="loading-word">Loading...</div> </div> </div> <script>var time=null,loaderEl=document.getElementById('loader'),startLoading=()=>{time=Date.now(),loaderEl.classList.remove('loading')},hideLoader=()=>{document.body.style.overflow='auto',loader.classList.add('loading')},endLoading=()=>{time?500<Date.now()-time?(time=null,hideLoader()):(setTimeout(endLoading,500-(Date.now()-time)),time=null):hideLoader()};window.addEventListener('DOMContentLoaded',endLoading),loaderEl.addEventListener('click',endLoading);</script> <div id="copy-tooltip"></div> <div id="heatmap-tooltip"></div> <div id="container"> <div id="wrap"> <div id="header-nav"> <nav id="main-nav" aria-label="Primary navigation"> <a class="main-nav-link-wrap" href="/en/"> <div class="icon main-nav-icon rotate"> &#xe62b; </div> <span class="main-nav-link">Home</span> <a class="main-nav-link-wrap" href="/en/archives"> <div class="icon main-nav-icon rotate"> &#xe62b; </div> <span class="main-nav-link">Archives</span> <a class="main-nav-link-wrap" href="/en/about"> <div class="icon main-nav-icon rotate"> &#xe62b; </div> <span class="main-nav-link">About</span> <a class="main-nav-link-wrap" href="/en/friend"> <div class="icon main-nav-icon rotate"> &#xe62b; </div> <span class="main-nav-link">Friend</span> <a id="main-nav-toggle" class="nav-icon" aria-label="Toggle navigation" role="button"></a> </a></a></a></a></nav> <nav id="sub-nav" aria-label="Secondary navigation"> <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed" aria-label="RSS Feed" target="_blank"></a> <a id="nav-search-btn" class="nav-icon popup-trigger" title="Search" aria-label="Search"></a> </nav> <nav id="i18n-nav" aria-label="Language selection"> <div class="custom-dropdown"> <div class="select-selected" id="select-selected" role="button" aria-haspopup="listbox" aria-expanded="false" aria-label="Language menu"> <span id="nav-language-btn" class="nav-icon" style="padding:0 20px 0 0"></span> <span id="selected-lang">English</span> </div> <ul class="select-items" id="select-items" role="listbox" aria-label="Languages"> <li data-value="zh-CN" role="option" aria-selected="false">简体中文</li> <li data-value="en" role="option" class="selected" aria-selected="true">English</li> </ul> </div> <script>var selectSelected=document.getElementById('select-selected'),selectedLang=document.getElementById('selected-lang'),selectItems=document.getElementById('select-items'),selectOptions=selectItems.querySelectorAll('li');selectSelected.addEventListener('click',()=>{selectItems.classList.toggle('show');var expanded='true'===selectSelected.getAttribute('aria-expanded');selectSelected.setAttribute('aria-expanded',(!expanded).toString())}),selectOptions.forEach(item=>{item.addEventListener('click',()=>{var langMap={'zh-CN':'/20241221/2024-promise-performance-benchmark/',en:'/en/20241221/2024-promise-performance-benchmark/'};selectedLang.textContent=item.textContent,selectItems.classList.remove('show'),selectOptions.forEach(option=>{option.classList.remove('selected')}),item.classList.add('selected'),window.location=langMap[item.dataset.value]})}),document.addEventListener('click',event=>{event.target.closest('.custom-dropdown')||(selectItems.classList.remove('show'),selectSelected.setAttribute('aria-expanded','false'))});</script> </nav> <a href="https://github.com/D-Sketon/hexo-theme-reimu" class="triangle-badge" title="github" target="_blank" rel="nofollow noopener noreferrer"> <div class="icon icon-github triangle-badge-icon"></div> </a> </div> <header id="header" aria-label="Site header"> <picture></picture> <img fetchpriority="high" src="/images/Promise.webp" alt="2024 JavaScript Promise Performance Comparison"> <div id="header-outer"> <div id="header-title"> <span id="logo"> <h1 data-aos="slide-up">2024 JavaScript Promise Performance Comparison</h1> </span> <h2 id="subtitle-wrap" data-aos="slide-down"> </h2> </div> </div> </header> <div id="content" aria-label="Page content" class="sidebar-left"> <aside id="sidebar" aria-label="Sidebar"> <div class="sidebar-wrapper-container sticky"> <meting-js theme="var(--color-link)" id="2265921590" server="netease" type="playlist" order="random" list-folded="true"></meting-js> <div class="sidebar-wrapper"> <div class="sidebar-wrap" data-aos="fade-up"> <div class="sidebar-toc-sidebar"><h3 class="toc-title">Contents</h3> <div class="sidebar-toc-wrapper toc-div-class"> <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#benchmark"><span class="toc-number">1.</span> <span class="toc-text"> Benchmark</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bluebird-vs-native-promise"><span class="toc-number">1.1.</span> <span class="toc-text"> Bluebird vs Native Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sequential-execution"><span class="toc-number">1.1.1.</span> <span class="toc-text"> Sequential Execution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parallel-execution"><span class="toc-number">1.1.2.</span> <span class="toc-text"> Parallel Execution</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#native-promise-vs-javascript-promise"><span class="toc-number">1.2.</span> <span class="toc-text"> Native Promise vs JavaScript Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sequential-execution-2"><span class="toc-number">1.2.1.</span> <span class="toc-text"> Sequential Execution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parallel-execution-2"><span class="toc-number">1.2.2.</span> <span class="toc-text"> Parallel Execution</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#conclusion"><span class="toc-number">2.</span> <span class="toc-text"> Conclusion</span></a></li></ol> </div> </div> <div class="hidden sidebar-common-sidebar"><div class="sidebar-author"> <img data-src="/avatar/avatar.webp" data-sizes="auto" alt="D-Sketon" class="lazyload"> <div class="sidebar-author-name">D-Sketon</div> <div class="sidebar-description">D-Sketon&#39;s blog</div> </div> <div class="sidebar-state"> <div class="sidebar-state-article"> <div>Post</div> <div class="sidebar-state-number">75</div> </div> <div class="sidebar-state-category"> <div>Category</div> <div class="sidebar-state-number">10</div> </div> <div class="sidebar-state-tag"> <div>Tag</div> <div class="sidebar-state-number">19</div> </div> </div> <div class="sidebar-social"> <div class="icon-github sidebar-social-icon"> <a href="https://github.com/D-Sketon" itemprop="url" target="_blank" aria-label="github" rel="nofollow noopener noreferrer"></a> </div> <div class="icon-bilibili sidebar-social-icon"> <a href="https://space.bilibili.com/20339857" itemprop="url" target="_blank" aria-label="bilibili" rel="nofollow noopener noreferrer"></a> </div> </div> <div class="sidebar-menu"> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/" aria-label="Home"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">Home</div> </div> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/archives" aria-label="Archives"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">Archives</div> </div> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/about" aria-label="About"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">About</div> </div> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/friend" aria-label="Friend"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">Friend</div> </div> </div> </div> <div class="sidebar-btn-wrapper" style="position:static"> <div class="current sidebar-toc-btn"></div> <div class="sidebar-common-btn"></div> </div> </div> </div> <div class="sidebar-widget"> </div> </div> </aside> <section id="main" aria-label="Main content"><article id="post-en/2024年 JavaScript Promise 性能对比" class="article h-entry" itemscope itemtype="https://schema.org/BlogPosting"> <div class="article-inner" data-aos="fade-up"> <div class="article-meta"> <div class="article-date"> <span class="article-date-link icon-calendar" data-aos="zoom-in"> <time datetime="2024-12-21T06:57:17.000Z" itemprop="datePublished">2024-12-21</time> <time style="display:none" id="post-update-time">2025-11-01</time> </span> </div> <div class="article-category"> <a class="article-category-link" href="/en/categories/%E8%AE%A1%E8%BD%AF%E6%9D%82%E8%B0%88/" title="计软杂谈">计软杂谈</a> </div> </div> <div class="hr-line"></div> <div class="article-entry e-content" itemprop="articleBody"> <p>This article was inspired by the following article:</p> <div class="post-link-card-wrap"> <div class="post-link-card"> <a href="https://blog.skk.moe/post/promise-performance-benchmark" title="2021 JavaScript Promise Performance Comparison" rel="nofollow noopener noreferrer" target="_blank"></a> <div class="post-link-card-cover-wrap"><img src="https://img10.360buyimg.com/ddimg/jfs/t1/214940/28/13992/13695/622039e0E8283ea56/6176b9c35f4d60ab.png" class="no-lightbox" title="2021 JavaScript Promise Performance Comparison" alt="2021 JavaScript Promise Performance Comparison"></div> <div class="post-link-card-item-wrap"> <div class="post-link-card-title">2021 JavaScript Promise Performance Comparison</div> <div class="post-link-card-excerpt"><span class="icon-link"></span>https://blog.skk.moe/post/promise-performance-benchmark</div> </div> </div> </div> <p>In the “2021 JavaScript Promise Performance Comparison” article, Sukka provided a detailed performance comparison of JavaScript Promises and concluded that “Bluebird remains the fastest Promise implementation with the least memory usage”.</p> <p>Building on this foundation, this article compares the performance of JavaScript Promise in 2024, examining whether Node’s native Promise performance has improved over the years and how the emerging Bun’s Promise implementation performs?</p> <h2 id="benchmark"><a class="markdownIt-Anchor" href="#benchmark"></a> Benchmark</h2> <p>The Benchmark Suite used in the test comes from Sukka’s Fork version based on modifications by the v8 team:</p> <div class="post-link-card-wrap"> <div class="post-link-card"> <a href="https://github.com/sukkaw/promise-performance-tests" title="promise-performance-tests" rel="nofollow noopener noreferrer" target="_blank"></a> <div class="post-link-card-cover-wrap"><img src="https://github.githubassets.com/assets/apple-touch-icon-144x144-b882e354c005.png" class="no-lightbox" title="promise-performance-tests" alt="promise-performance-tests"></div> <div class="post-link-card-item-wrap"> <div class="post-link-card-title">promise-performance-tests</div> <div class="post-link-card-excerpt"><span class="icon-link"></span>https://github.com/sukkaw/promise-performance-tests</div> </div> </div> </div> <p>The test environment is:</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OS: Windows_NT 10.0.22631 x64</span><br><span class="line">CPU: 13th Gen Intel(R) Core(TM) i5-13400F x 16</span><br><span class="line">Memory: 32581.421875 MiB</span><br></pre></td></tr></table></figure> <h3 id="bluebird-vs-native-promise"><a class="markdownIt-Anchor" href="#bluebird-vs-native-promise"></a> Bluebird vs Native Promise</h3> <h4 id="sequential-execution"><a class="markdownIt-Anchor" href="#sequential-execution"></a> Sequential Execution</h4> <p>Sequential Promise execution has mutual dependencies or strict timing logic between Promises, and cannot be executed in parallel. In doxbee, the following code is used to simulate sequential execution in daily development:</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class_ title">Promise</span>.<span class="function_ title">all</span>([blobPromise, filePromise])</span><br><span class="line">  .<span class="function_ title">then</span>(<span class="function">(<span class="params">[blobId, fileV]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Do something</span></span><br><span class="line">    <span class="comment">// For example, insert blobId and fileV into database</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="function_ title">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Do something</span></span><br><span class="line">    <span class="comment">// For example, do a query for fileIdV</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="function_ title">then</span>(<span class="function">(<span class="params">fileIdV</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Do something</span></span><br><span class="line">    <span class="comment">// For example, insert fileIdV into database</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="function_ title">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Catch error</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [blobId, file] = <span class="keyword">await</span> <span class="class_ title">Promise</span>.<span class="function_ title">all</span>([blobPromise, filePromise]);</span><br><span class="line">  <span class="comment">// Do something</span></span><br><span class="line">  <span class="keyword">await</span> <span class="class_ title">DoSomething</span>(blobId, file);</span><br><span class="line">  <span class="comment">// Do something</span></span><br><span class="line">  <span class="keyword">await</span> <span class="class_ title">DoSomething</span>(tx);</span><br><span class="line">  <span class="comment">// Do something</span></span><br><span class="line">  <span class="keyword">await</span> <span class="class_ title">DoSomething</span>(&#123;</span><br><span class="line">    fileId,</span><br><span class="line">    <span class="attr">versionId</span>: version.<span class="property">id</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="comment">// Catch error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <div id="echarts4596" style="width:100%;height:500px;margin:0 auto"></div> <script src="https://unpkg.com/echarts@6.0.0/dist/echarts.min.js"></script> <script>window.eChartecharts4596ResizeHandler&&window.removeEventListener('resize',eChartecharts4596ResizeHandler);var eChartecharts4596,eChartecharts4596ResizeHandler,optionecharts4596={tooltip:{trigger:'axis',confine:!1,appendTo:document.body,axisPointer:{type:'shadow'}},grid:{left:0,right:0},legend:{data:['Promise BlueBird','Promise native','Async/Await Bluebird','Async/Await native'],bottom:0,textStyle:{color:'var(--color-default)'}},title:{text:'doxbee promise performance',subtext:'Lower is better',x:'center',y:'top'},xAxis:[{type:'category',axisTick:{show:!1},data:['Node.js 18.20.4','Node.js 20.18.1','Node.js 22.9.0','Bun 1.1.42']}],yAxis:[{type:'value',name:'Time (ms)'}],series:[{name:'Promise BlueBird',type:'bar',barGap:0,emphasis:{focus:'series'},data:[20.298,18.19,17.189,16.207]},{name:'Promise native',type:'bar',emphasis:{focus:'series'},data:[22.293,22.092,21.081,25.791]},{name:'Async/Await Bluebird',type:'bar',emphasis:{focus:'series'},data:[26.787,26.035,24.852,24.57]},{name:'Async/Await native',type:'bar',emphasis:{focus:'series'},data:[16.09,16.261,15.58,18.428]}]};void 0!==window.echarts&&((eChartecharts4596=echarts.init(document.getElementById('echarts4596'))).setOption(optionecharts4596),eChartecharts4596ResizeHandler=function(){eChartecharts4596.resize()},window.addEventListener('resize',eChartecharts4596ResizeHandler));</script> <div id="echarts3701" style="width:100%;height:500px;margin:0 auto"></div> <script src="https://unpkg.com/echarts@6.0.0/dist/echarts.min.js"></script> <script>window.eChartecharts3701ResizeHandler&&window.removeEventListener('resize',eChartecharts3701ResizeHandler);var eChartecharts3701,eChartecharts3701ResizeHandler,optionecharts3701={tooltip:{trigger:'axis',confine:!1,appendTo:document.body,axisPointer:{type:'shadow'}},grid:{left:0,right:0},legend:{data:['Promise BlueBird','Promise native','Async/Await Bluebird','Async/Await native'],bottom:0,textStyle:{color:'var(--color-default)'}},title:{text:'doxbee promise memory',x:'center',y:'top',subtext:'Lower is better'},xAxis:[{type:'category',axisTick:{show:!1},data:['Node.js 18.20.4','Node.js 20.18.1','Node.js 22.9.0','Bun 1.1.42']}],yAxis:[{type:'value',name:'Memory (MiB)'}],series:[{name:'Promise BlueBird',type:'bar',barGap:0,emphasis:{focus:'series'},data:[2.102,2.089,.939,1.65]},{name:'Promise native',type:'bar',emphasis:{focus:'series'},data:[7.593,7.057,1.404,1.656]},{name:'Async/Await Bluebird',type:'bar',emphasis:{focus:'series'},data:[3.07,3.417,1.161,2.044]},{name:'Async/Await native',type:'bar',emphasis:{focus:'series'},data:[1.107,1.231,.969,1.081]}]};void 0!==window.echarts&&((eChartecharts3701=echarts.init(document.getElementById('echarts3701'))).setOption(optionecharts3701),eChartecharts3701ResizeHandler=function(){eChartecharts3701.resize()},window.addEventListener('resize',eChartecharts3701ResizeHandler));</script> <p>From the charts, it can be seen that Promise BlueBird performs better than Promise native in both performance and memory usage during sequential execution, while Async/Await Bluebird is inferior to Async/Await Native in both performance and memory usage. Overall, native Async/Await is optimal for sequential execution.</p> <h4 id="parallel-execution"><a class="markdownIt-Anchor" href="#parallel-execution"></a> Parallel Execution</h4> <p>Parallel Promise execution has no mutual dependencies between Promises and can be executed in parallel. In doxbee, the following code is used to simulate parallel execution in daily development:</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class_ title">Promise</span>.<span class="function_ title">all</span>(queries) <span class="comment">// queries is an array of lots of promises</span></span><br><span class="line">  .<span class="function_ title">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Do something</span></span><br><span class="line">    <span class="comment">// For example, commit transaction</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="function_ title">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Catch error, and rollback transaction</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="class_ title">Promise</span>.<span class="function_ title">all</span>(queries); <span class="comment">// queries is an array of lots of promises</span></span><br><span class="line">  <span class="keyword">await</span> <span class="class_ title">DoSomething</span>(); <span class="comment">// For example, commit transaction</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">  <span class="comment">// Catch error, and rollback transaction</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <div id="echarts7477" style="width:100%;height:500px;margin:0 auto"></div> <script src="https://unpkg.com/echarts@6.0.0/dist/echarts.min.js"></script> <script>window.eChartecharts7477ResizeHandler&&window.removeEventListener('resize',eChartecharts7477ResizeHandler);var eChartecharts7477,eChartecharts7477ResizeHandler,optionecharts7477={tooltip:{trigger:'axis',confine:!1,appendTo:document.body,axisPointer:{type:'shadow'}},grid:{left:0,right:0},legend:{data:['Promise BlueBird','Promise native','Async/Await Bluebird','Async/Await native'],bottom:0,textStyle:{color:'var(--color-default)'}},title:{text:'parallel promise performance',x:'center',y:'top',subtext:'Lower is better'},xAxis:[{type:'category',axisTick:{show:!1},data:['Node.js 18.20.4','Node.js 20.18.1','Node.js 22.9.0','Bun 1.1.42']}],yAxis:[{type:'value',name:'Time (ms)'}],series:[{name:'Promise BlueBird',type:'bar',barGap:0,emphasis:{focus:'series'},data:[10.777,9.905,8.37,17.985]},{name:'Promise native',type:'bar',emphasis:{focus:'series'},data:[43.976,42.32,35.363,35.593]},{name:'Async/Await Bluebird',type:'bar',emphasis:{focus:'series'},data:[87.759,83.829,82.541,80.386]},{name:'Async/Await native',type:'bar',emphasis:{focus:'series'},data:[45.565,45.492,42.793,50.35]}]};void 0!==window.echarts&&((eChartecharts7477=echarts.init(document.getElementById('echarts7477'))).setOption(optionecharts7477),eChartecharts7477ResizeHandler=function(){eChartecharts7477.resize()},window.addEventListener('resize',eChartecharts7477ResizeHandler));</script> <div id="echarts2602" style="width:100%;height:500px;margin:0 auto"></div> <script src="https://unpkg.com/echarts@6.0.0/dist/echarts.min.js"></script> <script>window.eChartecharts2602ResizeHandler&&window.removeEventListener('resize',eChartecharts2602ResizeHandler);var eChartecharts2602,eChartecharts2602ResizeHandler,optionecharts2602={tooltip:{trigger:'axis',confine:!1,appendTo:document.body,axisPointer:{type:'shadow'}},grid:{left:0,right:0},legend:{data:['Promise BlueBird','Promise native','Async/Await Bluebird','Async/Await native'],bottom:0,textStyle:{color:'var(--color-default)'}},title:{text:'parallel promise memory',x:'center',y:'top',subtext:'Lower is better'},xAxis:[{type:'category',axisTick:{show:!1},data:['Node.js 18.20.4','Node.js 20.18.1','Node.js 22.9.0','Bun 1.1.42']}],yAxis:[{type:'value',name:'Memory (MiB)'}],series:[{name:'Promise BlueBird',type:'bar',barGap:0,emphasis:{focus:'series'},data:[2.31,1.996,.83,2.608]},{name:'Promise native',type:'bar',emphasis:{focus:'series'},data:[22.379,20.919,5.952,3.247]},{name:'Async/Await Bluebird',type:'bar',emphasis:{focus:'series'},data:[56.746,50.4,8.972,9.57]},{name:'Async/Await native',type:'bar',emphasis:{focus:'series'},data:[20.22,22.433,5.104,20.22]}]};void 0!==window.echarts&&((eChartecharts2602=echarts.init(document.getElementById('echarts2602'))).setOption(optionecharts2602),eChartecharts2602ResizeHandler=function(){eChartecharts2602.resize()},window.addEventListener('resize',eChartecharts2602ResizeHandler));</script> <p>Similar to sequential execution, Promise BlueBird performs better than Promise native in both performance and memory usage during parallel execution, with speed 4 times faster and memory usage 7 times less (though the gap on Bun is not as large). While Async/Await Bluebird is inferior to Async/Await Native in both performance and memory usage (except on Bun). Overall, if you use Promise, BlueBird is better; but if you use Async/Await, native Async/Await is better.</p> <h3 id="native-promise-vs-javascript-promise"><a class="markdownIt-Anchor" href="#native-promise-vs-javascript-promise"></a> Native Promise vs JavaScript Promise</h3> <p>The Promise implementations participating in Benchmark include:</p> <ul> <li><a target="_blank" rel="noopener" href="http://bluebirdjs.com/">Bluebird</a></li> <li><a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js">core-js</a></li> <li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/es6-promise">es6-promise@npm</a></li> <li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/promise">es6-promise-polyfill@npm</a></li> <li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/promise">promise@npm</a></li> <li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/q">Q.js</a></li> <li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/zousan">SPromiseMeSpeed</a></li> <li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/zousan">Zousan</a></li> </ul> <h4 id="sequential-execution-2"><a class="markdownIt-Anchor" href="#sequential-execution-2"></a> Sequential Execution</h4> <div id="echarts4243" style="width:100%;height:700px;margin:0 auto"></div> <script src="https://unpkg.com/echarts@6.0.0/dist/echarts.min.js"></script> <script>window.eChartecharts4243ResizeHandler&&window.removeEventListener('resize',eChartecharts4243ResizeHandler);var eChartecharts4243,eChartecharts4243ResizeHandler,optionecharts4243={title:{text:'doxbee promise performance and memory',x:'center',y:'top',subtext:'Lower is better'},tooltip:{trigger:'axis',confine:!1,appendTo:document.body,axisPointer:{type:'shadow'}},legend:{data:['Time (ms)','Memory (MiB)'],bottom:0,textStyle:{color:'var(--color-default)'}},grid:{left:0,right:0},xAxis:[{type:'value',position:'top',name:'Time (ms)',nameLocation:'start'},{type:'value',position:'bottom',name:'Memory (MiB)',nameLocation:'start'}],yAxis:{type:'category',data:['Zousan','SPromiseMeSpeed','Q.js','npm-promise','npm-es6-promise','npm-es6-promise-polyfill','core-js','Bluebird','Native Baseline']},series:[{name:'Time (ms)',type:'bar',xAxisIndex:0,data:[49.848,22.196,45.681,24.895,33.419,21.583,26.145,17.189,21.081]},{name:'Memory (MiB)',type:'bar',xAxisIndex:1,data:[1.799,1.552,3.95,1.784,1.879,1.337,1.522,.939,1.404]}]};void 0!==window.echarts&&((eChartecharts4243=echarts.init(document.getElementById('echarts4243'))).setOption(optionecharts4243),eChartecharts4243ResizeHandler=function(){eChartecharts4243.resize()},window.addEventListener('resize',eChartecharts4243ResizeHandler));</script> <p>Bluebird is optimal in both performance and memory usage.</p> <h4 id="parallel-execution-2"><a class="markdownIt-Anchor" href="#parallel-execution-2"></a> Parallel Execution</h4> <div id="echarts3051" style="width:100%;height:700px;margin:0 auto"></div> <script src="https://unpkg.com/echarts@6.0.0/dist/echarts.min.js"></script> <script>window.eChartecharts3051ResizeHandler&&window.removeEventListener('resize',eChartecharts3051ResizeHandler);var eChartecharts3051,eChartecharts3051ResizeHandler,optionecharts3051={title:{text:'parallel promise performance and memory',x:'center',y:'top',subtext:'Lower is better'},tooltip:{trigger:'axis',confine:!1,appendTo:document.body,axisPointer:{type:'shadow'}},legend:{data:['Time (ms)','Memory (MiB)'],bottom:0,textStyle:{color:'var(--color-default)'}},grid:{left:0,right:0,bottom:'3%',containLabel:!0},xAxis:[{type:'value',position:'top',name:'Time (ms)',nameLocation:'start'},{type:'value',position:'bottom',name:'Memory (MiB)',nameLocation:'start'}],yAxis:{type:'category',data:['Zousan','SPromiseMeSpeed','Q.js','npm-promise','npm-es6-promise','npm-es6-promise-polyfill','core-js','Bluebird','Native Baseline']},series:[{name:'Time (ms)',type:'bar',xAxisIndex:0,data:[137.342,34.29,48.322,19.643,298.335,35.281,55.51,8.37,35.363]},{name:'Memory (MiB)',type:'bar',xAxisIndex:1,data:[10.942,5.355,4.239,2.214,1.389,5.867,6.289,.83,5.952]}]};void 0!==window.echarts&&((eChartecharts3051=echarts.init(document.getElementById('echarts3051'))).setOption(optionecharts3051),eChartecharts3051ResizeHandler=function(){eChartecharts3051.resize()},window.addEventListener('resize',eChartecharts3051ResizeHandler));</script> <p>Bluebird remains the most excellent Promise implementation.</p> <h2 id="conclusion"><a class="markdownIt-Anchor" href="#conclusion"></a> Conclusion</h2> <ul> <li>Bluebird remains the fastest JavaScript Promise implementation with the least memory usage.</li> <li>As Node.js versions update, native Promise performance has improved, but there is still a certain gap compared to Bluebird. However, Async/Await performance and memory usage have surpassed Bluebird.</li> <li>Bun’s Promise performance is similar to Node.js 22.</li> <li>As written in Bluebird’s README: <strong>Please use native promises instead if at all possible</strong>. Today, native Promise is already good enough. However, if you need to use Promise Polyfill or need additional APIs provided by Bluebird, then Bluebird remains the optimal choice.</li> </ul> </div> <footer class="article-footer"> <blockquote class="article-copyright"> <p><strong><span class="icon icon-user"></span>Author: </strong>D-Sketon</p> <p><strong><span class="icon icon-link"></span>Permalink: </strong><a href="https://d-sketon.github.io/en/20241221/2024-promise-performance-benchmark/">https://d-sketon.github.io/en/20241221/2024-promise-performance-benchmark/</a></p> <p><strong><span class="icon icon-copyright"></span>License: </strong>All articles on this blog are licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="nofollow noopener noreferrer" target="_blank"><span class="icon-creative-commons"></span>BY-NC-SA</a> license agreement unless otherwise stated. Please indicate the source when reprinting!</p> <span class="article-copyright-bg icon-creative-commons"></span> </blockquote> <div class="share-wrapper"> <a href="https://connect.qq.com/widget/shareqq/index.html?url=www.baidu.com&amp;title=2024%20JavaScript%20Promise%20Performance%20Comparison&amp;desc=This%20article%20compares%20the%20performance%20of%20JavaScript%20Promise%20in%202024%2C%20examining%20whether%20Node&#39;s%20native%20Promise%20performance%20has%20improved%20over%20the%20years%20and%20how%20the%20emerging%20Bun&#39;s%20Promise%20implementation%20performs.&amp;source=https%3A%2F%2Fd-sketon.github.io" target="_blank" rel="noopener noreferrer" title="2024 JavaScript Promise Performance Comparison"> <div class="icon icon-qq share-icon"> </div> </a> <a href="javascript:;" title="2024 JavaScript Promise Performance Comparison"> <div class="icon icon-weixin share-icon"> <div id="share-weixin"> <div class="share-weixin-dom"> <div class="share-weixin-content"> <img id="share-weixin-banner"> <div id="share-weixin-title"></div> <div id="share-weixin-desc"></div> </div> <div class="share-weixin-qrcode"> <div class="share-weixin-info"> <div id="share-weixin-author"></div> <div id="share-weixin-theme">Powered By hexo-theme-reimu</div> </div> <img id="share-weixin-qr"> </div> </div> <div class="share-weixin-canvas"></div> </div> </div> </a> </div> <a data-aos="zoom-in" href="/en/20241221/2024-promise-performance-benchmark/#comments" class="article-comment-link"> <span class="post-comments-count waline-comment-count" data-path="/en/20241221/2024-promise-performance-benchmark/" itemprop="commentCount"></span> Comments </a> <span data-aos="zoom-in" class="article-visitor-link"> <span class="waline-pageview-count" data-path="/en/20241221/2024-promise-performance-benchmark/">0</span> <em class="post-meta-item-text">Readings</em> </span> <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item" data-aos="zoom-in"><a class="article-tag-list-link" href="/en/tags/JavaScript/" rel="tag" title="JavaScript">JavaScript</a></li></ul> </footer> </div> <nav id="article-nav" aria-label="Article navigation" data-aos="fade-up"> <div class="article-nav-link-wrap left"> <img data-src="https://d-sketon.top/img/_backwebp480/bg22.webp" data-sizes="auto" alt="How I Reduced Hexo&#39;s Memory Usage by 30%" class="lazyload"> <a href="/en/20250131/hexo-source2/" aria-label="Prev: How I Reduced Hexo&#39;s Memory Usage by 30%" title="Prev: How I Reduced Hexo&#39;s Memory Usage by 30%"></a> <div class="article-nav-caption">Prev</div> <h3 class="article-nav-title"> How I Reduced Hexo&#39;s Memory Usage by 30% </h3> </div> <div class="article-nav-link-wrap right"> <img data-src="https://d-sketon.top/img/_backwebp480/bg13.webp" data-sizes="auto" alt="How to customize your hexo-theme-reimu" class="lazyload"> <a href="/en/20241124/hexo-theme-reimu-customize/" aria-label="Next: How to customize your hexo-theme-reimu" title="Next: How to customize your hexo-theme-reimu"></a> <div class="article-nav-caption">Next</div> <h3 class="article-nav-title"> How to customize your hexo-theme-reimu </h3> </div> </nav> </article> <section id="comments" data-aos="fade-up"> <div class="comment-header"> <h2 class="comment-title">Leave a comment</h2> <div class="comment-selector"> <div class="comment-selector-wrap"> <div class="selector-item" data-selector="waline"> <span>waline</span> </div> </div> </div> </div> <div class="comment-content"> <div class="comment waline-comment" data-aos="fade-up" id="waline-comment"> </div> </div> </section> </section> </div> <footer id="footer" aria-label="Site footer"> <div style="width:100%;overflow:hidden"> <div class="footer-line"></div> </div> <div id="footer-info"> <div> <span class="icon-copyright"></span> 2020-2025 <span class="footer-info-sep rotate"></span> D-Sketon </div> <div> Powered by&nbsp;<a href="https://hexo.io/" rel="nofollow noopener noreferrer" target="_blank">Hexo</a>&nbsp; Theme.<a href="https://github.com/D-Sketon/hexo-theme-reimu" rel="nofollow noopener noreferrer" target="_blank">Reimu</a> </div> <div> <span class="icon-brush"></span> 178.7k &nbsp;|&nbsp; <span class="icon-coffee"></span> 14:35 </div> <div> <span class="icon-eye"></span> <span id="busuanzi_container_site_pv">Number of visits&nbsp;<span id="busuanzi_value_site_pv"></span></span> &nbsp;|&nbsp; <span class="icon-user"></span> <span id="busuanzi_container_site_uv">Number of visitors&nbsp;<span id="busuanzi_value_site_uv"></span></span> </div> </div> </footer> <div class="sidebar-top"> <div class="rotate sidebar-top-taichi"></div> <div class="arrow-up"></div> </div> <div id="mask" class="hide"></div> </div> <nav id="mobile-nav" aria-label="Mobile navigation"> <div class="sidebar-wrap"> <div class="sidebar-toc-sidebar"><h3 class="toc-title">Contents</h3> <div class="sidebar-toc-wrapper toc-div-class"> <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#benchmark"><span class="toc-number">1.</span> <span class="toc-text"> Benchmark</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bluebird-vs-native-promise"><span class="toc-number">1.1.</span> <span class="toc-text"> Bluebird vs Native Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sequential-execution"><span class="toc-number">1.1.1.</span> <span class="toc-text"> Sequential Execution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parallel-execution"><span class="toc-number">1.1.2.</span> <span class="toc-text"> Parallel Execution</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#native-promise-vs-javascript-promise"><span class="toc-number">1.2.</span> <span class="toc-text"> Native Promise vs JavaScript Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sequential-execution-2"><span class="toc-number">1.2.1.</span> <span class="toc-text"> Sequential Execution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#parallel-execution-2"><span class="toc-number">1.2.2.</span> <span class="toc-text"> Parallel Execution</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#conclusion"><span class="toc-number">2.</span> <span class="toc-text"> Conclusion</span></a></li></ol> </div> </div> <div class="hidden sidebar-common-sidebar"><div class="sidebar-author"> <img data-src="/avatar/avatar.webp" data-sizes="auto" alt="D-Sketon" class="lazyload"> <div class="sidebar-author-name">D-Sketon</div> <div class="sidebar-description">D-Sketon&#39;s blog</div> </div> <div class="sidebar-state"> <div class="sidebar-state-article"> <div>Post</div> <div class="sidebar-state-number">75</div> </div> <div class="sidebar-state-category"> <div>Category</div> <div class="sidebar-state-number">10</div> </div> <div class="sidebar-state-tag"> <div>Tag</div> <div class="sidebar-state-number">19</div> </div> </div> <div class="sidebar-social"> <div class="icon-github sidebar-social-icon"> <a href="https://github.com/D-Sketon" itemprop="url" target="_blank" aria-label="github" rel="nofollow noopener noreferrer"></a> </div> <div class="icon-bilibili sidebar-social-icon"> <a href="https://space.bilibili.com/20339857" itemprop="url" target="_blank" aria-label="bilibili" rel="nofollow noopener noreferrer"></a> </div> </div> <div class="sidebar-menu"> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/" aria-label="Home"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">Home</div> </div> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/archives" aria-label="Archives"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">Archives</div> </div> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/about" aria-label="About"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">About</div> </div> <div class="sidebar-menu-link-wrap"> <a class="sidebar-menu-link-dummy" href="/en/friend" aria-label="Friend"></a> <div class="icon rotate sidebar-menu-icon"> &#xe62b; </div> <div class="sidebar-menu-link">Friend</div> </div> </div> </div> </div> <div class="sidebar-btn-wrapper"> <div class="current sidebar-toc-btn"></div> <div class="sidebar-common-btn"></div> </div> </nav> </div> <div class="site-search"> <div class="popup reimu-popup"> <div class="reimu-search"> <div class="reimu-search-input-icon"></div> <div id="reimu-search-input"></div> <div class="popup-btn-close"></div> </div> <div class="reimu-results"> <div id="reimu-stats"></div> <div id="reimu-hits"></div> <div id="reimu-pagination" class="reimu-pagination"></div> </div> <img class="reimu-bg" src="/images/reimu.png"> </div> </div> <script src="https://npm.webcache.cn/lazysizes@5.3.2/lazysizes.min.js" integrity="sha384-3gT&#x2F;vsepWkfz&#x2F;ff7PpWNUeMzeWoH3cDhm&#x2F;A8jM7ouoAK0&#x2F;fP&#x2F;9bcHHR5kHq2nf+e" crossorigin></script> <script src="https://npm.webcache.cn/clipboard@2.0.11/dist/clipboard.min.js" integrity="sha384-J08i8An&#x2F;QeARD9ExYpvphB8BsyOj3Gh2TSh1aLINKO3L0cMSH2dN3E22zFoXEi0Q" crossorigin></script> <script src="/js/script.js"></script> <script src="/js/aos.js"></script> <script>var aosInit=()=>{AOS.init({duration:1e3,easing:'ease',once:!0,offset:50})};'loading'===document.readyState?document.addEventListener('DOMContentLoaded',aosInit):aosInit();</script> <script src="/js/pjax_script.js" data-pjax></script> <script>var ALGOLIA_CONFIG={logo:'/images/algolia_logo.svg',algolia:{applicationID:'AIE5T9AKYQ',apiKey:'2b855b06a058dd80bc84972874e020aa',indexName:'reimu_new_algoliasearch',hits:{per_page:parseInt('10')},labels:{input_placeholder:'Search.....',hits_empty:'No results found for 「${query}」',hits_stats:'Found ${hits} results (in ${time} ms)'}}};</script> <script src="https://npm.webcache.cn/algoliasearch@4.17.1/dist/algoliasearch-lite.umd.js" integrity="sha384-xvLS0jfKuoREs7pqkRI&#x2F;OI8GcqohO5S+jQz7ZBtQXnsXmD+9jDOOY4cL6dCPzlrk" crossorigin defer></script> <script src="https://npm.webcache.cn/@reimujs/instantsearch.js@4.57.0-beta.1/dist/instantsearch.production.min.js" integrity="sha384-aagKMe8nkqaP2DYQc8kkYOL5l+M5Q2WH&#x2F;Uhr4teOh0Ybp0RZj0kUSDm45qPikMjK" crossorigin defer></script> <script src="/js/algolia_search.js" defer></script> <script src="https://npm.webcache.cn/mouse-firework@0.1.1/dist/index.umd.js" integrity="sha384-8LyaidD9GPxQQgLJO&#x2F;WRw&#x2F;O2h3BoNq&#x2F;ApI&#x2F;ecpvM6RsrCz2qP2ppBXUKihP4V&#x2F;2d" crossorigin></script> <script>window.matchMedia('(max-width: 768px)').matches||window.firework&&window.firework(JSON.parse('{"excludeElements":["a","button"],"particles":[{"shape":"circle","move":["emit"],"easing":"easeOutExpo","colors":["var(--red-1)","var(--red-2)","var(--red-3)","var(--red-4)"],"number":20,"duration":[1200,1800],"shapeOptions":{"radius":[16,32],"alpha":[0.3,0.5]}},{"shape":"circle","move":["diffuse"],"easing":"easeOutExpo","colors":["var(--red-0)"],"number":1,"duration":[1200,1800],"shapeOptions":{"radius":20,"alpha":[0.2,0.5],"lineWidth":6}}]}'));</script> <script src="https://npm.webcache.cn/theme-shokax-pjax@0.0.3/dist/index.umd.js" integrity="sha384-xneY1WY8hOfUzswrE4CrYq35N4BdVcxqxwHPr9zawE&#x2F;jMSCxD+jAPU55x&#x2F;jj3wlf" crossorigin></script> <script src="/js/pjax.js"></script> <div id="lazy-script"> <div> <script data-pjax>window.REIMU_POST={author:'D-Sketon',title:'2024 JavaScript Promise Performance Comparison',url:'https://d-sketon.github.io/20241221/2024-promise-performance-benchmark/',excerpt:'This article compares the performance of JavaScript Promise in 2024, examining whether Node&#39;s native Promise performance has improved over the years and how the emerging Bun&#39;s Promise implementation performs.',description:'This article compares the performance of JavaScript Promise in 2024, examining whether Node&#39;s native Promise performance has improved over the years and how the emerging Bun&#39;s Promise implementation performs.',stripContent:'This article was inspired by the following article:                                    2021 JavaScript Promise Performance Comparison         https://blog.skk.moe/post/promise-performance-benchmark                In the “2021 JavaScript Promise Perfo',date:'Sat Dec 21 2024 14:57:17 GMT+0800',updated:'Sat Nov 01 2025 17:25:03 GMT+0800',cover:'/images/Promise.webp'};</script> <script src="/js/insert_highlight.js" data-pjax></script> <script src="https://npm.webcache.cn/@zumer/snapdom@1.9.14/dist/snapdom.min.js" integrity="sha384-OEQ+fJp&#x2F;Mvi2uzBREXybtxryJvLytWapuHu4EE6LPwTKUwATYcc55tPPcZTzVcmx" crossorigin defer data-pjax></script> <script src="https://npm.webcache.cn/qrcode@1.5.1/build/qrcode.js" integrity="sha384-VT1EeewTCEXgndcPMQ0PzV+uVFYjxFIjmAA7s5gcMX9t4Dt5TD+OVQIn7NJWIXn7" crossorigin defer data-pjax></script> <script type="module" data-pjax>let PhotoSwipeLightbox=(await safeImport('https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe-lightbox.esm.min.js','sha384-DiL6M/gG+wmTxmCRZyD1zee6lIhawn5TGvED0FOh7fXcN9B0aZ9dexSF/N6lrZi/')).default,initPswp=(gallery,children)=>{0<_$$(gallery+' '+children).length&&new PhotoSwipeLightbox({gallery:gallery,children:children,pswpModule:()=>safeImport('https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe.esm.min.js','sha384-WkkO3GCmgkC3VQWpaV8DqhKJqpzpF9JoByxDmnV8+oTJ7m3DfYEWX1fu1scuS4+s')}).init()},pswp=()=>{initPswp('.article-entry','a.article-gallery-item'),initPswp('.article-gallery','a.article-gallery-item'),window.lightboxStatus='done',window.removeEventListener('lightbox:ready',pswp)};'ready'===window.lightboxStatus?pswp():window.addEventListener('lightbox:ready',pswp);</script> <script data-pjax>var savedCommentType,configDefault,loadScript=(src,integrity)=>{var script=document.createElement('script');return script.src=src,integrity&&(script.integrity=integrity),script.crossOrigin='anonymous',script},commentConfigKeys=['waline'],commentConfig={waline:{enable:!0,load:async()=>{var container=document.querySelector('.waline-comment');container&&(container.style.display='block',container=(await safeImport('https://npm.webcache.cn/@waline/client@2.15.8/dist/waline.mjs','sha384-9sbqJjrfGjbkI6/PI4nU/MvBfEmkkPC4YK9I4zBeMIf1CVCZdCMH/KinBEAZII/5')).init,window.walineInstance=container({el:'.waline-comment',serverURL:'https://reimu.d-sketon.top',lang:document.documentElement.lang||'en',locale:{},emoji:['https://unpkg.com/@waline/emojis@1.2.0/weibo','https://unpkg.com/@waline/emojis@1.2.0/alus','https://unpkg.com/@waline/emojis@1.2.0/bilibili','https://unpkg.com/@waline/emojis@1.2.0/qq','https://unpkg.com/@waline/emojis@1.2.0/tieba','https://unpkg.com/@waline/emojis@1.2.0/tw-emoji'],meta:['nick','mail','link'],requiredMeta:['nick','mail'],wordLimit:JSON.parse('0'),comment:!0,pageSize:JSON.parse('10'),dark:'html[data-theme="dark"]',pageview:JSON.parse('true')}))}}},defaultComment=(commentConfig.enable=commentConfigKeys.some(key=>commentConfig[key].enable),'');function loadComments(){if(commentConfig.enable){let loadedComments={valine:!1,waline:!1,twikoo:!1,gitalk:!1,giscus:!1},hideAllComments=()=>{document.querySelectorAll('.comment').forEach(container=>{container.style.display='none'})},loadCommentSystem=type=>{loadedComments[type]?document.querySelector(`.${type}-comment`).style.display='block':(commentConfig[type]?.load(),loadedComments[type]=!0)};var commentInit=()=>{var defaultSelectorItem;for(let item of document.querySelectorAll('.selector-item'))item.addEventListener('click',()=>{var commentType=item.getAttribute('data-selector');window.localStorage.setItem('commentType',commentType),(item=>{var commentItems=document.querySelectorAll('.selector-item');for(let i=0;i<commentItems.length;i++)commentItems[i].classList.remove('active');item.classList.add('active');item=item.getAttribute('data-selector');hideAllComments(),loadCommentSystem(item)})(item)});defaultComment&&(defaultSelectorItem=document.querySelector(`[data-selector="${defaultComment}"]`))&&(defaultSelectorItem.style.display='block',defaultSelectorItem.classList.add('active'),loadCommentSystem(defaultComment))};'loading'===document.readyState?document.addEventListener('DOMContentLoaded',commentInit):commentInit()}}commentConfig.enable&&(savedCommentType=localStorage.getItem('commentType'),(defaultComment=savedCommentType&&commentConfig[savedCommentType]?.enable?savedCommentType:defaultComment)||commentConfig[configDefault='waline']?.enable&&(defaultComment=configDefault),defaultComment=defaultComment||commentConfigKeys.find(sys=>commentConfig[sys].enable)||''),loadComments();</script> </div> </div> <script>console.log(String.raw`%c 
 ______     ______     __     __    __     __  __    
/\  == \   /\  ___\   /\ \   /\ "-./  \   /\ \/\ \   
\ \  __<   \ \  __\   \ \ \  \ \ \-./\ \  \ \ \_\ \  
 \ \_\ \_\  \ \_____\  \ \_\  \ \_\ \ \_\  \ \_____\ 
  \/_/ /_/   \/_____/   \/_/   \/_/  \/_/   \/_____/ 
                                                  
`,'color: #ff5252;'),console.log('%c Theme.Reimu v1.10.3 %c https://github.com/D-Sketon/hexo-theme-reimu ','color: white; background: #ff5252; padding:5px 0;','padding:4px;border:1px solid #ff5252;');</script> <script src="https://npm.webcache.cn/busuanzi@2.3.0/bsz.pure.mini.js" integrity="sha384-0M75wtSkhjIInv4coYlaJU83+OypaRCIq2SukQVQX04eGTCBXJDuWAbJet56id+S" crossorigin async></script> <script>'serviceWorker'in navigator&&navigator.serviceWorker.getRegistrations().then(registrations=>{for(var registration of registrations)registration.unregister()});</script> <script src="https://npm.webcache.cn/aplayer@1.10.1/dist/APlayer.min.js" integrity="sha384-gdGYZwHnfJM54evoZhpO0s6ZF5BQiybkiyW7VXr+h5UfruuRL&#x2F;aORyw+5+HZoU6e" crossorigin></script> <script>var meting_api='https://api.injahow.cn/meting/?server=:server&type=:type&id=:id&auth=:auth&r=:r';</script> <script>if(!window.matchMedia('(max-width: 768px)').matches){if(window.matchMedia('(max-width: 959px)').matches){let meting=_$('meting-js');if(meting){meting.setAttribute('fixed','true');let aside=meting.parentNode?.parentNode;'ASIDE'===aside?.tagName&&(meting.parentNode.removeChild(meting),document.body.appendChild(meting))}}let script=document.createElement('script');script.src='https://npm.webcache.cn/meting@2.0.1/dist/Meting.min.js',script.integrity='sha384-ASVlpKF80A22OXTK3tfEjZm1EL6uFMKIC4p8+0maanw1S/IyB+Y4JG+ZDU7GpKE8',script.crossOrigin='anonymous',document.body.appendChild(script)}</script> <script data-pjax>setTimeout(()=>{var e,echartsList=Object.keys(window).filter(e=>e.startsWith('eChartecharts')&&!e.endsWith('ResizeHandler')).map(e=>window[e]),updateEchartsDarkMode=e=>{if(echartsList?.length)for(var t of echartsList)t?.setTheme('dark'===e?'dark':'default')},_emode=(document.body.addEventListener('dark-theme-set',()=>updateEchartsDarkMode('dark')),document.body.addEventListener('light-theme-set',()=>updateEchartsDarkMode('default')),localStorage.getItem('dark_mode'));'auto'===_emode?(e=window.matchMedia('(prefers-color-scheme: dark)').matches,updateEchartsDarkMode(e?'dark':'default')):updateEchartsDarkMode('true'===_emode?'dark':'default')},2e3);</script> </body></html>