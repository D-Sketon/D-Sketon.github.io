(()=>{let m=_$("#reimu-search-input"),l=_$("#reimu-hits"),u=_$("#reimu-pagination"),r=1;function d(t,i,a){l.innerHTML="",i=(i-1)*a,t.slice(i,i+a).forEach(n=>{l.insertAdjacentHTML("beforeend",`<a href="${n.url}" class="reimu-hit-item-link" title="${n.title||""}">${n.title}</a>`)})}m.insertAdjacentHTML("beforeend",'<form id="search-form"><input type="text" id="search-text"></form>'),fetch("/search.json").then(t=>{if(t.ok)return t.json();throw new Error("Network response was not ok "+t.statusText)}).then(t=>{_$("#search-form").off("submit").on("submit",i=>{i.preventDefault();let a=_$("#search-text").value;if(l.innerHTML="",u.innerHTML="",a){let n=t.filter(e=>e.title&&e.title.toLowerCase().includes(a.toLowerCase())||e.content&&e.content.toLowerCase().includes(a.toLowerCase())),s=Math.ceil(n.length/10);u.insertAdjacentHTML("beforeend",'<ul class="ais-Pagination-list pagination">');for(let e=1;e<=s;e++){let o=document.createElement("li");o.className="ais-Pagination-item pagination-item ais-Pagination-item--page",o.innerHTML=`<a class="ais-Pagination-link page-number" aria-label="Page ${e}" href="#">${e}</a>`,e===r&&o.classList.add("ais-Pagination-item--selected","current"),u.querySelector("ul").appendChild(o)}_$$(".page-number").forEach(e=>{e.off("click").on("click",o=>{o.preventDefault(),r=e.innerText,_$$(".ais-Pagination-item").forEach(c=>{c.classList.remove("ais-Pagination-item--selected","current")}),e.parentNode.classList.add("ais-Pagination-item--selected","current"),d(n,r,10)})}),d(n,r,10)}})}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)}),_$(".popup-trigger").off("click").on("click",t=>{t.stopPropagation(),t=window.innerWidth-document.documentElement.offsetWidth,_$("#container").style.marginRight=t+"px",_$("#header-nav").style.marginRight=t+"px";let i=_$(".popup"),a=(i.classList.add("show"),_$("#mask").classList.remove("hide"),document.body.style.overflow="hidden",setTimeout(()=>{_$("#reimu-search-input input")?.focus()},100),s=>{var e=i.querySelectorAll("input, [href]"),o=e[0],c=e[e.length-1];s.key==="Escape"?n():s.key==="Tab"&&e.length&&(s.shiftKey&&document.activeElement===o?(s.preventDefault(),c?.focus()):s.shiftKey||document.activeElement!==c||(s.preventDefault(),o?.focus()))});function n(){i.classList.remove("show"),_$("#mask").classList.add("hide"),_$("#container").style.marginRight="",_$("#header-nav").style.marginRight="",document.body.style.overflow="",document.removeEventListener("keydown",a),_$("#nav-search-btn")?.focus()}document.addEventListener("keydown",a),i.__closePopup=n}),_$(".popup-btn-close").off("click").on("click",()=>{_$(".popup").__closePopup?.()})})();
