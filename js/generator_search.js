(()=>{var m=_$("#reimu-search-input");let l=_$("#reimu-hits"),u=_$("#reimu-pagination"),s=1;function d(t,i,a){l.innerHTML="",i=(i-1)*a,t.slice(i,i+a).forEach(o=>{l.insertAdjacentHTML("beforeend",`<a href="${o.url}" class="reimu-hit-item-link" title="${o.title||""}">${o.title}</a>`)})}m.insertAdjacentHTML("beforeend",'<form id="search-form"><input type="text" id="search-text"></form>'),fetch("/search.json").then(t=>{if(t.ok)return t.json();throw new Error("Network response was not ok "+t.statusText)}).then(t=>{_$("#search-form").off("submit").on("submit",i=>{i.preventDefault();let a=_$("#search-text").value;if(l.innerHTML="",u.innerHTML="",a){let r=t.filter(e=>e.title&&e.title.toLowerCase().includes(a.toLowerCase())||e.content&&e.content.toLowerCase().includes(a.toLowerCase()));var o=Math.ceil(r.length/10);u.insertAdjacentHTML("beforeend",'<ul class="ais-Pagination-list pagination">');for(let e=1;e<=o;e++){var n=document.createElement("li");n.className="ais-Pagination-item pagination-item ais-Pagination-item--page",n.innerHTML=`<a class="ais-Pagination-link page-number" aria-label="Page ${e}" href="#">${e}</a>`,e===s&&n.classList.add("ais-Pagination-item--selected","current"),u.querySelector("ul").appendChild(n)}_$$(".page-number").forEach(e=>{e.off("click").on("click",c=>{c.preventDefault(),s=e.innerText,_$$(".ais-Pagination-item").forEach(h=>{h.classList.remove("ais-Pagination-item--selected","current")}),e.parentNode.classList.add("ais-Pagination-item--selected","current"),d(r,s,10)})}),d(r,s,10)}})}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)}),_$(".popup-trigger").off("click").on("click",t=>{t.stopPropagation(),t=window.innerWidth-document.documentElement.offsetWidth,_$("#container").style.marginRight=t+"px",_$("#header-nav").style.marginRight=t+"px";let i=_$(".popup"),a=(i.classList.add("show"),_$("#mask").classList.remove("hide"),document.body.style.overflow="hidden",setTimeout(()=>{_$("#reimu-search-input input")?.focus()},100),n=>{var r=i.querySelectorAll("input, [href]"),e=r[0],c=r[r.length-1];n.key==="Escape"?o():n.key==="Tab"&&r.length&&(n.shiftKey&&document.activeElement===e?(n.preventDefault(),c?.focus()):n.shiftKey||document.activeElement!==c||(n.preventDefault(),e?.focus()))});function o(){i.classList.remove("show"),_$("#mask").classList.add("hide"),_$("#container").style.marginRight="",_$("#header-nav").style.marginRight="",document.body.style.overflow="",document.removeEventListener("keydown",a),_$("#nav-search-btn")?.focus()}document.addEventListener("keydown",a),i.__closePopup=o}),_$(".popup-btn-close").off("click").on("click",()=>{_$(".popup").__closePopup?.()})})();
