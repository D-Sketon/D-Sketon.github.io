function loadScripts(e,t){if(t<e.length){let i=e[t],d=i.getAttribute("src"),c=r=>new Promise((o,s)=>{var n=document.createElement("script");i.type&&(n.type=i.type),i.src&&(n.src=i.src,i.integrity&&(n.integrity=i.integrity),i.crossOrigin&&(n.crossOrigin=i.crossOrigin),n.onload=o,n.onerror=s),r&&(n.text=r),document.head.appendChild(n),i.src||o()});(d?c():c(i.text)).then(()=>loadScripts(e,t+1)).catch(r=>{console.error("Failed to load script: "+(d||"inline script"),r),loadScripts(e,t+1)})}}window.Pjax&&(Pjax.prototype.getElements=function(){var e=window.REIMU_CONFIG.i18n_languages,t=window.REIMU_CONFIG.base;let i=new URL(t).pathname,d=(i.endsWith("/")||(i+="/"),window.location.href),c=new URL(d).pathname.replace(i,""),r=document.querySelectorAll("a[href]"),o=[];for(let l=0;l<r.length;l++){var s=r[l],n=s.getAttribute("href");if(!(s.getAttribute("target")==="_blank"||s.getAttribute("rel")?.includes("noopener")||n.startsWith("mailto:")||n.startsWith("tel:")||n.startsWith("javascript:")||n.startsWith("data:")||n.startsWith("vbscript:")))if(e){let w=new URL(n,d).href,a=new URL(w).pathname.replace(i,"");a&&c?-1<(n=e.findIndex(h=>c.startsWith(h)))?e.findIndex(h=>a.startsWith(h))===n&&o.push(s):e.findIndex(h=>a.startsWith(h))===-1&&o.push(s):o.push(s)}else o.push(s)}return o}),window.Pjax&&new window.Pjax({selectors:["#header>img","#header>picture","head title","#header-title","#subtitle-wrap","#main","#content",".sidebar-widget",".sidebar-wrapper",".sidebar-wrapper-container","#mobile-nav","#lazy-script","#i18n-nav"],switches:{".sidebar-wrapper-container":function(e,t){e.className=t.className,this.onSwitch()},"#content":function(e,t){e.className=t.className,this.onSwitch()},"#header-title":Pjax.switches.outerHTML,"#subtitle-wrap":Pjax.switches.outerHTML,"#main":function(e,t){loadScripts([...t.querySelectorAll("script")],0),e.outerHTML=t.outerHTML,this.onSwitch()},"#mobile-nav":Pjax.switches.outerHTML,"#lazy-script":function(e,t){loadScripts([...t.querySelectorAll("script")],0),e.innerHTML=t.innerHTML,this.onSwitch()}},cacheBust:!1}),window.addEventListener("pjax:success",()=>{_$$("script[data-pjax]").forEach(e=>{var{textContent:w,parentNode:t,id:i,className:d,type:c,src:r,dataset:o,onload:s,integrity:n,crossOrigin:l}=e,w=w||"",a=document.createElement("script");i&&(a.id=i),d&&(a.className=d),c&&(a.type=c),o.pjax!==void 0&&(a.dataset.pjax=""),s&&(a.onload=s),n&&(a.integrity=n),l&&(a.crossOrigin=l),r?(a.src=r,a.async=!1):w&&(a.textContent=w),t.replaceChild(a,e)})}),window.addEventListener("pjax:complete",()=>{_$("#header-nav")?.classList.remove("header-nav-hidden");let e=window.localStorage.getItem("dark_mode");if(e=="true")document.body.dispatchEvent(new CustomEvent("dark-theme-set"));else if(e=="false")document.body.dispatchEvent(new CustomEvent("light-theme-set"));else if(e==="auto"){let t=window.matchMedia("(prefers-color-scheme: dark)").matches;document.body.dispatchEvent(new CustomEvent((t?"dark":"light")+"-theme-set"))}window.walineInstance&&(window.walineInstance.destroy(),window.walineInstance=null)}),window.addEventListener("pjax:send",()=>{window.lightboxStatus="loading",window.__panZoomList&&(window.__panZoomList.forEach(e=>e.destroy()),window.__panZoomList=[])}),window.startLoading&&window.addEventListener("pjax:send",startLoading),window.endLoading&&window.addEventListener("pjax:complete",endLoading),window.aosInit&&window.addEventListener("pjax:success",aosInit);
