function loadScripts(e,n){if(n<e.length){let i=e[n],c=i.getAttribute("src");var r=o=>new Promise((d,s)=>{var t=document.createElement("script");i.type&&(t.type=i.type),i.src&&(t.src=i.src,i.integrity&&(t.integrity=i.integrity),i.crossOrigin&&(t.crossOrigin=i.crossOrigin),t.onload=d,t.onerror=s),o&&(t.text=o),document.head.appendChild(t),i.src||d()});(c?r():r(i.text)).then(()=>loadScripts(e,n+1)).catch(o=>{console.error("Failed to load script: "+(c||"inline script"),o),loadScripts(e,n+1)})}}window.Pjax&&(Pjax.prototype.getElements=function(){var e=window.REIMU_CONFIG.i18n_languages,n=window.REIMU_CONFIG.base;let r=new URL(n).pathname;r.endsWith("/")||(r+="/");var i=window.location.href;let c=new URL(i).pathname.replace(r,"");var o=document.querySelectorAll("a[href]"),d=[];for(let l=0;l<o.length;l++){var s=o[l],t=s.getAttribute("href"),w=s.getAttribute("target")==="_blank"||s.getAttribute("rel")?.includes("noopener");if(!(w||t.startsWith("mailto:")||t.startsWith("tel:")||t.startsWith("javascript:")||t.startsWith("data:")||t.startsWith("vbscript:")))if(e){w=new URL(t,i).href;let a=new URL(w).pathname.replace(r,"");a&&c?-1<(t=e.findIndex(h=>c.startsWith(h)))?e.findIndex(h=>a.startsWith(h))===t&&d.push(s):e.findIndex(h=>a.startsWith(h))===-1&&d.push(s):d.push(s)}else d.push(s)}return d}),window.Pjax&&new window.Pjax({selectors:["#header>img","#header>picture","head title","#header-title","#subtitle-wrap","#main","#content",".sidebar-widget",".sidebar-wrapper",".sidebar-wrapper-container","#mobile-nav","#lazy-script","#i18n-nav"],switches:{".sidebar-wrapper-container":function(e,n){e.className=n.className,this.onSwitch()},"#content":function(e,n){e.className=n.className,this.onSwitch()},"#header-title":Pjax.switches.outerHTML,"#subtitle-wrap":Pjax.switches.outerHTML,"#main":function(e,n){loadScripts([...n.querySelectorAll("script")],0),e.outerHTML=n.outerHTML,this.onSwitch()},"#mobile-nav":Pjax.switches.outerHTML,"#lazy-script":function(e,n){loadScripts([...n.querySelectorAll("script")],0),e.innerHTML=n.innerHTML,this.onSwitch()}},cacheBust:!1}),window.addEventListener("pjax:success",()=>{_$$("script[data-pjax]").forEach(e=>{var{textContent:l,parentNode:n,id:r,className:i,type:c,src:o,dataset:d,onload:s,integrity:t,crossOrigin:w}=e,l=l||"",a=document.createElement("script");r&&(a.id=r),i&&(a.className=i),c&&(a.type=c),d.pjax!==void 0&&(a.dataset.pjax=""),s&&(a.onload=s),t&&(a.integrity=t),w&&(a.crossOrigin=w),o?(a.src=o,a.async=!1):l&&(a.textContent=l),n.replaceChild(a,e)})}),window.addEventListener("pjax:complete",()=>{_$("#header-nav")?.classList.remove("header-nav-hidden");var e=window.localStorage.getItem("dark_mode");e=="true"?document.body.dispatchEvent(new CustomEvent("dark-theme-set")):e=="false"?document.body.dispatchEvent(new CustomEvent("light-theme-set")):e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches,document.body.dispatchEvent(new CustomEvent((e?"dark":"light")+"-theme-set"))),window.walineInstance&&(window.walineInstance.destroy(),window.walineInstance=null)}),window.addEventListener("pjax:send",()=>{window.lightboxStatus="loading",window.__panZoomList&&(window.__panZoomList.forEach(e=>e.destroy()),window.__panZoomList=[])}),window.startLoading&&window.addEventListener("pjax:send",startLoading),window.endLoading&&window.addEventListener("pjax:complete",endLoading),window.aosInit&&window.addEventListener("pjax:success",aosInit);
