if("serviceWorker"in navigator&&window.REIMU_CONFIG.swPath){let e=function(){_$(".notification-wrapper").classList.add("show")};var emitUpdate=e;_$("#notification-update-btn").onclick=()=>{try{navigator.serviceWorker.getRegistration().then(o=>{o.waiting.postMessage("skipWaiting")})}catch{window.location.reload()}},_$("#notification-close-btn").onclick=()=>{_$(".notification-wrapper").classList.remove("show")},navigator.serviceWorker.register(window.REIMU_CONFIG.swPath).then(o=>{console.log("Service Worker \u6CE8\u518C\u6210\u529F: ",o),o.waiting?e():o.onupdatefound=()=>{console.log("Service Worker \u66F4\u65B0\u4E2D...");let t=o.installing;t.onstatechange=()=>{t.state==="installed"&&navigator.serviceWorker.controller&&e()}}}).catch(o=>{console.log("Service Worker \u6CE8\u518C\u5931\u8D25: ",o)});let i=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{i||(i=!0,window.location.reload())})}
